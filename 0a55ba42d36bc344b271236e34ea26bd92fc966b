{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "2b9b0894_abf43893",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1476205
      },
      "writtenOn": "2020-12-17T07:22:53Z",
      "side": 1,
      "message": "Hi James,\nThanks for the comments.\nPatchset_4 is ready for review.",
      "revId": "0a55ba42d36bc344b271236e34ea26bd92fc966b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ee095bd7_3354cfde",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1476205
      },
      "writtenOn": "2020-12-17T13:30:40Z",
      "side": 1,
      "message": "Hi Scott,\nCan you please check my replies.",
      "revId": "0a55ba42d36bc344b271236e34ea26bd92fc966b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c5cc7431_b5c2792d",
        "filename": "src/dsp/x86/distance_weighted_blend_sse4.cc",
        "patchSetId": 4
      },
      "lineNbr": 241,
      "author": {
        "id": 1000882
      },
      "writtenOn": "2020-12-17T12:47:30Z",
      "side": 1,
      "message": "I think you could interleave the preds and use _mm_madd_epi16 here.",
      "range": {
        "startLine": 237,
        "startChar": 0,
        "endLine": 241,
        "endChar": 44
      },
      "revId": "0a55ba42d36bc344b271236e34ea26bd92fc966b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3cd3be9b_d270dedd",
        "filename": "src/dsp/x86/distance_weighted_blend_sse4.cc",
        "patchSetId": 4
      },
      "lineNbr": 241,
      "author": {
        "id": 1476205
      },
      "writtenOn": "2020-12-17T13:30:40Z",
      "side": 1,
      "message": "pred0 is an unsigned 16-bit value.\nweight0 is an unsigned 4-bit value.\nSo max range of mult0 can be upto 20-bits. Thus we cannot use _mm_madd_epi16 here.",
      "parentUuid": "c5cc7431_b5c2792d",
      "range": {
        "startLine": 237,
        "startChar": 0,
        "endLine": 241,
        "endChar": 44
      },
      "revId": "0a55ba42d36bc344b271236e34ea26bd92fc966b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e3615f35_a8718a79",
        "filename": "src/dsp/x86/distance_weighted_blend_sse4.cc",
        "patchSetId": 4
      },
      "lineNbr": 241,
      "author": {
        "id": 1002219
      },
      "writtenOn": "2020-12-17T20:38:02Z",
      "side": 1,
      "message": "\u003e pred0 is an unsigned 16-bit value.\n\u003e weight0 is an unsigned 4-bit value.\n\u003e So max range of mult0 can be upto 20-bits. Thus we cannot use _mm_madd_epi16 here.\n\nFor reference for those following along, the ranges of the prediction values are described here:\nhttps://chromium.googlesource.com/codecs/libgav1/+/refs/heads/master/src/dsp/convolve.cc#35\nhttps://chromium.googlesource.com/codecs/libgav1/+/refs/heads/master/src/dsp/warp.cc#37",
      "parentUuid": "3cd3be9b_d270dedd",
      "range": {
        "startLine": 237,
        "startChar": 0,
        "endLine": 241,
        "endChar": 44
      },
      "revId": "0a55ba42d36bc344b271236e34ea26bd92fc966b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "94cf3916_8ee89bf6",
        "filename": "src/dsp/x86/distance_weighted_blend_sse4.cc",
        "patchSetId": 4
      },
      "lineNbr": 241,
      "author": {
        "id": 1476205
      },
      "writtenOn": "2020-12-18T04:34:48Z",
      "side": 1,
      "message": "Theoretically max range of \u0027pred0\u0027 and \u0027pred1\u0027 is \u00270x9FF0\u0027. The same can be interpreted as below :\nkCompoundOffset \u003d (1 \u003c\u003c 14) + (1 \u003c\u003c 13)\n((1\u003c\u003c10)-1) \u003c\u003c 4) + kCompoundOffset \u003d 0x9FF0 (16-bit).\nhttps://chromium.googlesource.com/codecs/libgav1/+/refs/heads/master/src/dsp/distance_weighted_blend_test.cc#139\n\u0027_mm_madd_epi16\u0027 expects signed 16-bit values, where as pred0, pred1 are unsigned 16-bit values.",
      "parentUuid": "e3615f35_a8718a79",
      "range": {
        "startLine": 237,
        "startChar": 0,
        "endLine": 241,
        "endChar": 44
      },
      "revId": "0a55ba42d36bc344b271236e34ea26bd92fc966b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3085702c_1dd21710",
        "filename": "src/dsp/x86/distance_weighted_blend_sse4.cc",
        "patchSetId": 4
      },
      "lineNbr": 254,
      "author": {
        "id": 1000882
      },
      "writtenOn": "2020-12-17T12:47:30Z",
      "side": 1,
      "message": "If you use _mm_packus_epi32 instead, I think the clip_low can be eliminated.",
      "range": {
        "startLine": 252,
        "startChar": 0,
        "endLine": 254,
        "endChar": 65
      },
      "revId": "0a55ba42d36bc344b271236e34ea26bd92fc966b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "dcd54df2_76b5af6e",
        "filename": "src/dsp/x86/distance_weighted_blend_sse4.cc",
        "patchSetId": 4
      },
      "lineNbr": 254,
      "author": {
        "id": 1476205
      },
      "writtenOn": "2020-12-17T13:30:40Z",
      "side": 1,
      "message": "Here \u0027sum\u0027 can be negative.\nSo we cannot use \u0027_mm_packus_epi32\u0027 here.",
      "parentUuid": "3085702c_1dd21710",
      "range": {
        "startLine": 252,
        "startChar": 0,
        "endLine": 254,
        "endChar": 65
      },
      "revId": "0a55ba42d36bc344b271236e34ea26bd92fc966b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}